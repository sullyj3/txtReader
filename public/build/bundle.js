var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t){return null==t?"":t}function l(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function f(){return a(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let m;function $(t){m=t}const x=[],g=[],y=[],b=[],k=Promise.resolve();let T=!1;function v(t){y.push(t)}function _(t){b.push(t)}const L=new Set;let J=0;function D(){const t=m;do{for(;J<x.length;){const t=x[J];J++,$(t),M(t.$$)}for($(null),x.length=0,J=0;g.length;)g.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];L.has(e)||(L.add(e),e())}y.length=0}while(x.length);for(;b.length;)b.pop()();T=!1,L.clear(),$(t)}function M(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(v)}}const w=new Set;function S(t,e){t&&t.i&&(w.delete(t),t.i(e))}function E(t,e,n,o){if(t&&t.o){if(w.has(t))return;w.add(t),undefined.c.push((()=>{w.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}function C(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function j(t){t&&t.c()}function N(t,n,u,r){const{fragment:l,on_mount:c,on_destroy:s,after_update:d}=t.$$;l&&l.m(n,u),r||v((()=>{const n=c.map(e).filter(i);s?s.push(...n):o(n),t.$$.on_mount=[]})),d.forEach(v)}function A(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function O(t,e){-1===t.$$.dirty[0]&&(x.push(t),T||(T=!0,k.then(D)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function z(e,i,u,r,l,c,d,a=[-1]){const f=m;$(e);const p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(f?f.$$.context:[])),callbacks:n(),dirty:a,skip_bound:!1,root:i.target||f.$$.root};d&&d(p.root);let h=!1;if(p.ctx=u?u(e,i.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),h&&O(e,t)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!r&&r(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(s)}else p.fragment&&p.fragment.c();i.intro&&S(e.$$.fragment),N(e,i.target,i.anchor,i.customElement),D()}$(f)}class F{$destroy(){A(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(t){let e,n,i,u,r,a,m,$;return{c(){e=d("button"),e.textContent="Clear",n=f(),i=d("div"),u=d("label"),u.textContent="Join lines",r=f(),a=d("input"),h(u,"for","join-lines"),h(a,"type","checkbox"),h(i,"id","join-lines")},m(o,s){c(o,e,s),c(o,n,s),c(o,i,s),l(i,u),l(i,r),l(i,a),a.checked=t[1],m||($=[p(e,"click",t[5]),p(a,"change",t[9])],m=!0)},p(t,e){2&e&&(a.checked=t[1])},d(t){t&&s(e),t&&s(n),t&&s(i),m=!1,o($)}}}function P(e){let n,i,u,r,a,m,$,x,g,y,b,k,T,v=e[0]&&H(e);return{c(){n=d("div"),i=d("span"),u=d("input"),r=f(),a=d("p"),a.textContent="(Or press ctrl-V)",m=f(),$=d("div"),x=d("label"),x.textContent="Dark mode",g=f(),y=d("input"),b=f(),v&&v.c(),h(u,"type","file"),h(u,"name","choose file"),h(x,"for","theme-toggle"),h(y,"type","checkbox"),h($,"id","theme-toggle"),h(n,"id","menu")},m(t,o){c(t,n,o),l(n,i),l(i,u),e[7](u),l(i,r),l(i,a),l(n,m),l(n,$),l($,x),l($,g),l($,y),y.checked=e[2],l(n,b),v&&v.m(n,null),k||(T=[p(u,"change",e[6]),p(y,"change",e[8])],k=!0)},p(t,[e]){4&e&&(y.checked=t[2]),t[0]?v?v.p(t,e):(v=H(t),v.c(),v.m(n,null)):v&&(v.d(1),v=null)},i:t,o:t,d(t){t&&s(n),e[7](null),v&&v.d(),k=!1,o(T)}}}function q(t,e,n){let o,i,{menuDisplayText:u}=e,{menuShouldJoinLines:r}=e,{darkMode:l=!1}=e;return t.$$set=t=>{"menuDisplayText"in t&&n(0,u=t.menuDisplayText),"menuShouldJoinLines"in t&&n(1,r=t.menuShouldJoinLines),"darkMode"in t&&n(2,l=t.darkMode)},t.$$.update=()=>{if(8&t.$$.dirty){const t=o&&o[0]?o[0]:null;t&&(async t=>{n(0,u={type:"FileText",fileName:t.name,text:await t.text()})})(t)}},[u,r,l,o,i,()=>{n(0,u=null),n(3,o=null),n(4,i.value=null,i)},function(){o=this.files,n(3,o)},function(t){g[t?"unshift":"push"]((()=>{i=t,n(4,i)}))},function(){l=this.checked,n(2,l)},function(){r=this.checked,n(1,r)}]}class B extends F{constructor(t){super(),z(this,t,q,P,u,{menuDisplayText:0,menuShouldJoinLines:1,darkMode:2})}}function R(t){let e,n=t[0].fileName+"";return{c(){e=d("h1"),h(e,"id","filename"),h(e,"class","svelte-1s6z1hc")},m(t,o){c(t,e,o),e.innerHTML=n},p(t,o){1&o&&n!==(n=t[0].fileName+"")&&(e.innerHTML=n)},d(t){t&&s(e)}}}function V(t){let e,n;return{c(){e=d("pre"),n=a(t[1]),h(e,"id","text"),h(e,"class","svelte-1s6z1hc")},m(t,o){c(t,e,o),l(e,n)},p(t,e){2&e&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(n,t[1])},d(t){t&&s(e)}}}function G(e){let n,o,i=e[0]&&"FileText"===e[0].type&&R(e),u=e[0]&&V(e);return{c(){n=d("div"),i&&i.c(),o=f(),u&&u.c(),h(n,"id","text-display"),h(n,"class","svelte-1s6z1hc")},m(t,e){c(t,n,e),i&&i.m(n,null),l(n,o),u&&u.m(n,null)},p(t,[e]){t[0]&&"FileText"===t[0].type?i?i.p(t,e):(i=R(t),i.c(),i.m(n,o)):i&&(i.d(1),i=null),t[0]?u?u.p(t,e):(u=V(t),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},i:t,o:t,d(t){t&&s(n),i&&i.d(),u&&u.d()}}}function I(t){return t.replaceAll(/\s*(\r\n?|\n)/g," ")}function K(t){return t.trim().length>0}function Q(t,e,n){let o,{displayText:i}=e,{shouldJoinLines:u}=e;return t.$$set=t=>{"displayText"in t&&n(0,i=t.displayText),"shouldJoinLines"in t&&n(2,u=t.shouldJoinLines)},t.$$.update=()=>{5&t.$$.dirty&&i&&n(1,o=u?i.text.split(/(\r\n|\n)(\r\n?|\n)+/).map(I).filter(K).join("\n\n"):i.text)},[i,o,u]}class U extends F{constructor(t){super(),z(this,t,Q,G,u,{displayText:0,shouldJoinLines:2})}}function W(t){let e,n,o,i,u,a,m,$,x,y,b,k;function T(e){t[5](e)}function v(e){t[6](e)}function L(e){t[7](e)}let J={};return void 0!==t[1]&&(J.menuDisplayText=t[1]),void 0!==t[2]&&(J.menuShouldJoinLines=t[2]),void 0!==t[0]&&(J.darkMode=t[0]),o=new B({props:J}),g.push((()=>C(o,"menuDisplayText",T))),g.push((()=>C(o,"menuShouldJoinLines",v))),g.push((()=>C(o,"darkMode",L))),$=new U({props:{displayText:t[1],shouldJoinLines:t[2]}}),{c(){e=f(),n=d("main"),j(o.$$.fragment),m=f(),j($.$$.fragment),document.title="TxtReader",h(n,"class",x=r(t[3])+" svelte-1o2o5u2")},m(i,u){c(i,e,u),c(i,n,u),N(o,n,null),l(n,m),N($,n,null),y=!0,b||(k=p(n,"paste",t[4]),b=!0)},p(t,[e]){const l={};!i&&2&e&&(i=!0,l.menuDisplayText=t[1],_((()=>i=!1))),!u&&4&e&&(u=!0,l.menuShouldJoinLines=t[2],_((()=>u=!1))),!a&&1&e&&(a=!0,l.darkMode=t[0],_((()=>a=!1))),o.$set(l);const c={};2&e&&(c.displayText=t[1]),4&e&&(c.shouldJoinLines=t[2]),$.$set(c),(!y||8&e&&x!==(x=r(t[3])+" svelte-1o2o5u2"))&&h(n,"class",x)},i(t){y||(S(o.$$.fragment,t),S($.$$.fragment,t),y=!0)},o(t){E(o.$$.fragment,t),E($.$$.fragment,t),y=!1},d(t){t&&s(e),t&&s(n),A(o),A($),b=!1,k()}}}function X(t,e,n){let o=null,i=!1,u=!1,r="lightTheme";return t.$$.update=()=>{1&t.$$.dirty&&n(3,r=u?"darkTheme":"lightTheme")},[u,o,i,r,t=>{t.preventDefault(),n(1,o={type:"Pasted",text:t.clipboardData.getData("text")})},function(t){o=t,n(1,o)},function(t){i=t,n(2,i)},function(t){u=t,n(0,u)}]}return new class extends F{constructor(t){super(),z(this,t,X,W,u,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
